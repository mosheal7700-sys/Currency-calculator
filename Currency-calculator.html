<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>××—×©×‘×•×Ÿ ×”××¨×” - ×“×¨×•× ×××¨×™×§×” ×”××œ×</title>
    <style>
        :root {
            --primary: #1a5f7a;
            --accent: #eb4d4b;
            --success: #27ae60;
        }
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: #f0f2f5;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }
        .card {
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 400px;
        }
        h2 { text-align: center; color: var(--primary); margin-top: 0; border-bottom: 2px solid #eee; padding-bottom: 10px; }
        .input-group { margin-bottom: 18px; }
        label { display: block; margin-bottom: 6px; font-weight: 600; color: #444; }
        input, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1.1rem;
            box-sizing: border-box;
            transition: 0.3s;
        }
        input:focus, select:focus { border-color: var(--primary); outline: none; }
        .main-currencies { background: #f9f9f9; padding: 15px; border-radius: 12px; margin-bottom: 20px; }
        .footer-info { text-align: center; font-size: 0.75rem; color: #7f8c8d; margin-top: 20px; }
        .update-tag { color: var(--success); font-weight: bold; }
    </style>
</head>
<body>

<div class="card">
    <h2>××—×©×‘×•×Ÿ ×”××¨×” ×œ×˜×™×•×œ ğŸŒ</h2>
    
    <div class="main-currencies">
        <div class="input-group">
            <label>×©×§×œ ×—×“×© (ILS â‚ª)</label>
            <input type="number" id="ils" placeholder="0.00" oninput="calculate('ils')">
        </div>
        <div class="input-group">
            <label>×“×•×œ×¨ ×××¨×™×§××™ (USD $)</label>
            <input type="number" id="usd" placeholder="0.00" oninput="calculate('usd')">
        </div>
    </div>

    <div class="input-group">
        <label>×‘×—×¨ ××“×™× ×ª ×™×¢×“:</label>
        <select id="country-select" onchange="calculate('ils')">
            <option value="brl" selected>×‘×¨×–×™×œ (BRL R$)</option>
            <option value="ars">××¨×’× ×˜×™× ×” (ARS $)</option>
            <option value="clp">×¦'×™×œ×” (CLP $)</option>
            <option value="pen">×¤×¨×• (PEN S/.)</option>
            <option value="cop">×§×•×œ×•××‘×™×” (COP $)</option>
            <option value="bob">×‘×•×œ×™×‘×™×” (BOB Bs.)</option>
            <option value="uyu">××•×¨×•×’×•×•××™ (UYU $U)</option>
            <option value="pyg">×¤×¨×’×•×•××™ (PYG â‚²)</option>
            <option value="usd">××§×•×•×“×•×¨ (USD $)</option>
        </select>
    </div>

    <div class="input-group">
        <label id="dynamic-label">×¡×›×•× ×‘××˜×‘×¢ ××§×•××™</label>
        <input type="number" id="dynamic-input" placeholder="0.00" oninput="calculate('dynamic')">
    </div>

    <div class="footer-info">
        ×¡×˜×˜×•×¡ ×©×¢×¨×™×: <span id="status" class="update-tag">×˜×•×¢×Ÿ × ×ª×•× ×™×...</span>
    </div>
</div>

<script>
    let rates = {};

    async function fetchLiveRates() {
        try {
            const response = await fetch('https://cdn.jsdelivr.net/npm/@fawazahmed0/currency-api@latest/v1/currencies/ils.json');
            const data = await response.json();
            rates = data.ils;
            document.getElementById('status').innerText = "××¢×•×“×›×Ÿ ×œ×–××Ÿ ×××ª âœ…";
        } catch (e) {
            document.getElementById('status').innerText = "×©×’×™××”. ××©×ª××© ×‘×¢×¨×›×™ ×‘×¨×™×¨×ª ××—×“×œ.";
            rates = { usd: 0.27, brl: 1.35, ars: 220, clp: 250, pen: 1.0, cop: 1050, bob: 1.85, uyu: 10.5, pyg: 1980 };
        }
    }

    function calculate(source) {
        if (!rates.usd) return;

        const ils = document.getElementById('ils');
        const usd = document.getElementById('usd');
        const dynamic = document.getElementById('dynamic-input');
        const currency = document.getElementById('country-select').value;
        
        let amountInIls;

        if (source === 'ils') amountInIls = parseFloat(ils.value);
        else if (source === 'usd') amountInIls = parseFloat(usd.value) / rates.usd;
        else if (source === 'dynamic') amountInIls = parseFloat(dynamic.value) / rates[currency];

        if (isNaN(amountInIls)) {
            if (source !== 'ils') ils.value = "";
            if (source !== 'usd') usd.value = "";
            if (source !== 'dynamic') dynamic.value = "";
            return;
        }

        if (source !== 'ils') ils.value = amountInIls.toFixed(2);
        if (source !== 'usd') usd.value = (amountInIls * rates.usd).toFixed(2);
        if (source !== 'dynamic') dynamic.value = (amountInIls * rates[currency]).toFixed(2);
    }

    fetchLiveRates();
</script>

</body>
</html>
